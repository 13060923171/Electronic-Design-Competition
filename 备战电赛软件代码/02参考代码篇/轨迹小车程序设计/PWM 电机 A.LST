C51 COMPILER V8.05a   PWM_电__A                                                           03/02/2009 19:45:27 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE PWM_电__A
OBJECT MODULE PLACED IN PWM 电机 A.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE PWM 电机 A.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>               //      快速  跑的
   2          sbit P00=P0^0;    //循迹口              
   3          sbit P01=P0^1;
   4          sbit P02=P0^2;
   5          
   6          sbit P04=P0^4;     //电机1              左轮
   7          sbit P05=P0^5;
   8          
   9          sbit P06=P0^6;     //电机2
  10          sbit P07=P0^7;
  11          unsigned int i=0,j=0;//q=0,w=0;
  12          void main()
  13          { 
  14   1         while(1)
  15   1        {     
  16   2         P04=1;P05=1;P06=1; P07=1;
  17   2         TMOD=0X01;
  18   2         EA=1;
  19   2         ET0=1;         
  20   2        
  21   2      if(P00==0&&P01==1&&P02==0)                         // 小车直走           定时0.002ms             
  22   2       { 
  23   3       TH0=0XFF;                //定时0.005ms
  24   3       TL0=0Xfe;
  25   3       TR0=1;
  26   3       }
  27   2              if(P00==0&&P01==0&&P02==1)                //小车右转            定时0.005ms       
  28   2        { 
  29   3         TH0=0XFF;
  30   3         TL0=0Xfe;                              //0.01
  31   3         TR0=1;  
  32   3        }      
  33   2              if(P00==1&&P01==0&&P02==0)                //小车左转            定时0.005ms                     
  34   2        { 
  35   3         TH0=0XFF;
  36   3         TL0=0Xfe;
  37   3         TR0=1;
  38   3        }
  39   2          if(P00==1&&P01==1&&P02==1)                     //全部检测到黑线时 车停
  40   2                {
  41   3                 TH0=0XFF;
  42   3             TL0=0Xfe;
  43   3             TR0=1; } 
  44   2      
  45   2      
  46   2       /***********************************/
  47   2               if(P00==0&&P01==1&&P02==1)               //两个传感器测到 左拐
  48   2                {TH0=0XFF;
  49   3             TL0=0Xfe;
  50   3             TR0=1; } 
  51   2                if(P00==1&&P01==1&&P02==0)              //两个传感器测到 左拐
  52   2                {TH0=0XFF;
  53   3             TL0=0Xfe;
  54   3             TR0=1; } 
  55   2                
C51 COMPILER V8.05a   PWM_电__A                                                           03/02/2009 19:45:27 PAGE 2   

  56   2      /**********************************/    
  57   2              
  58   2       } 
  59   1      }
  60          
  61           xiong() interrupt 1 
  62          {        
  63   1        if(P00==0&&P01==1&&P02==0)                  //小车直线快走  定时0.002ms                               
  64   1               {
  65   2          TH0=0XFF;
  66   2          TL0=0Xfe;
  67   2      
  68   2              P04=0;                          //电机1 左轮
  69   2              P05=1;
  70   2              P06=1;                     //电机2       右转
  71   2              P07=0;
  72   2               } 
  73   1      
  74   1        if(P00==0&&P01==0&&P02==1)                      //小车右转            定时0.005ms       
  75   1         {                                    
  76   2                                        
  77   2          TH0=0XFF;
  78   2          TL0=0Xfe;
  79   2      
  80   2              P04=1;                          //电机1                  左轮
  81   2              P05=1;                  
  82   2              P06=1;                 //电机2
  83   2              P07=0;
  84   2              i=1;
  85   2         }
  86   1                              if(P00==0&&P01==0&&P02==0&&i==1)           // 特别                       出线时用
  87   1                                      {TH0=0XFF;
  88   2                                       TL0=0Xfe;
  89   2                                           P04=1;
  90   2                                           P05=1;
  91   2                                               P06=1;
  92   2                                               P07=0;
  93   2                                                                       j=0;// q=0;w=0;
  94   2                                              }
  95   1                                                              
  96   1          if(P00==1&&P01==0&&P02==0)            //小车左转                    定时0.005ms
  97   1             { 
  98   2              TH0=0XFF;
  99   2              TL0=0Xfe;
 100   2              P04=0;                          //电机1
 101   2                  P05=1;
 102   2                                              
 103   2                  P06=1;                         //电机2
 104   2                  P07=1;
 105   2              j=1;         
 106   2               }
 107   1                                 if(P00==0&&P01==0&&P02==0&&j==1)                // 特别                 出线时用
 108   1                                    { TH0=0XFF;
 109   2                                      TL0=0Xfe;
 110   2                                          P04=0;
 111   2                                          P05=1;
 112   2                                              P06=1;
 113   2                                              P07=1;
 114   2                                                              i=0;//q=0;w=0;   
 115   2                                                         }                                                    
 116   1               if(P00==1&&P01==1&&P02==1)
 117   1               {                                                                                  //全部检测到黑线时 车停
C51 COMPILER V8.05a   PWM_电__A                                                           03/02/2009 19:45:27 PAGE 3   

 118   2                TH0=0XFF;
 119   2            TL0=0Xfe;
 120   2                P04=1;           
 121   2                P05=1;
 122   2            P06=1;
 123   2            P07=1;}
 124   1       /*********************************************/
 125   1      
 126   1      
 127   1        if(P00==0&&P01==1&&P02==1)                      //两个传感器测到 左拐
 128   1               {                                                                                
 129   2                TH0=0XFF;
 130   2            TL0=0Xfe;
 131   2                P04=1;           
 132   2                P05=0;                                                          //  一个轮前转一个轮后转 转90
 133   2            P06=1;
 134   2                P07=0;
 135   2              //  q=1;
 136   2                }
 137   1                      /*               if(P00==0&&P01==0&&P02==0&&q==1)
 138   1                                               {
 139   1                                               TH0=0XFF;
 140   1                           TL0=0Xfe;
 141   1                               P04=1;    
 142   1                               P05=0;                            //
 143   1                           P06=1;
 144   1                           P07=0;
 145   1                               w=0;//i=0;j=0;
 146   1                                               }                */
 147   1                    if(P00==1&&P01==1&&P02==0)                          //两个传感器测到 右拐
 148   1                 {                                                                              
 149   2                  TH0=0XFF;
 150   2              TL0=0Xfe;                         //
 151   2                  P04=0;         
 152   2                  P05=1;
 153   2              P06=0;                                                                  //      一个轮前转一个轮后转 转90
 154   2              P07=1;
 155   2              //      w=1;
 156   2                      }                /* if(P00==0&&P01==0&&P02==0&&w==1)                      //两个传感器测到 右拐
 157   1                                {                                                                               
 158   1                               TH0=0XFF;
 159   1                           TL0=0Xfe;    //0.008
 160   1                               P04=0;    
 161   1                               P05=1;                    
 162   1                           P06=0;                             //
 163   1                           P07=1;
 164   1                                           q=0;//i=0;j=0;
 165   1                                                }               */
 166   1              }
 167          /***************************************/
 168          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    344    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V8.05a   PWM_电__A                                                           03/02/2009 19:45:27 PAGE 4   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
