/*--------------------------------------------------------------*/
//文件：	IRDA.H
//遥控器：	3010系列遥控器,目前只支持SAA3010T和H-3010X两种型号
//编码：	RC-5协议,
//			双相位编码发送,
//			(0->1)为1,(1->0)为0
//			周期T = 1.688ms,
//解码：	定时采样
//单片机：	STC89C51RC
//晶振：	12MHz
//红外接收：1838
//日期：	2009-6-14
//时间：	16:15	


/*--------------------------------------------------------------*/
#ifndef	__IRDA_H__			//防止重复定义
#define __IRDA_H__
#include <AT89X52.H>


/*--------------------------------------------------------------*/
//MCU资源选择
#define T3010_Timer_Select	0	//定时器选择
//T3010_Timer_Select = 1	选择定时器1
//T3010_Timer_Select = 0	选择定时器0
#define T3010_Int_Select	0	//外部中断选择
//T3010_Int_Select   = 1	选择外部中断1
//T3010_Int_Select   = 0	选择外部中断0

/*--------------------------------------------------------------*/
//3010遥控器型号选择
#define T3010_Type_Select	2	//遥控器型号
//T3010_Type_Select  = 0	选择SAA3010T - JINXING - 32个按键
//T3010_Type_Select  = 1	选择H-3010X - CHUNGHOP - 34个按键
//T3010_Type_Select  = 2	选择HL-3010 - 慧丽 - 34个按键



/*--------------------------------------------------------------*/
//宏定义---便于理解和阅读
// Close_IRDA	//关闭中断,等待任务执行完毕
// Open_IRDA	//开启中断,接收遥控按键



/*--------------------------------------------------------------*/
//函数声明(用户)
void IRDA_init(void);				//遥控接收初始化(调用一次就ok了)
unsigned char IRDA_get_key(void);	//将指令码转化为按键键值(用户自定义)



/*--------------------------------------------------------------*/
//函数调用方法
/*void main(void)
{
	unsigned char temp_key;

	IRDA_init();						//遥控接收初始化

	while(1)
	{
		if(IRDA_ok) 					//有按键按下
		{
			Close_IRDA					//关闭红外,等待以下任务执行完毕	
			IRDA_ok = 0;				//清接收有效标志位
			temp_key = IRDA_get_key();	//取得键值

			if(temp_key == 2)		TASK_0();	//任务0
			else if(temp_key == 3)	TASK_1();
			else if(temp_key == 4)	TASK_2();
			else if(temp_key == 5)	TASK_3();
			else if(temp_key == 6)	TASK_4();
			else if(temp_key == 7)	TASK_5();
			else if(temp_key == 8)	TASK_6();
			else if(temp_key == 9)	TASK_7();	//任务7
		}
		Open_IRDA						//开启红外,接收遥控按键
	}
}
		

/*--------------------------------------------------------------*/
#endif
